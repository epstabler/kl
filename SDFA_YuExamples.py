""" EXAMPLES for Yu et al 2025 -- these are transducers, in Yu's notation
"""

def t2m(t):
  """ Given transducer t in Yu's notation, return acceptor:
       * take the unique init state out of the list
       * convert the finals to a dictionary from finals to weights
       * take the output out of the transitions
  """
  (inits, finals, transitions) = t
  if len(inits) != 1: raise RuntimeError("DFST can only have 1 initial state")
  return (inits[0],
      dict(finals),
      dict([((qi,ii), (qj,pij)) for ((qi,ii), (_,qj,pij)) in transitions.items()])
      )

tADS = (['5'],
 [('8', 1.0)],
 {('5', '*'): ('*', '4', 0.007583417593528817),
  ('5', 'L*'): ('L*', '3', 0.8326592517694641),
  ('5', 'H*'): ('H*', '2', 0.03488372093023255),
  ('5', 'L+H*'): ('L+H*', '0', 0.0015166835187057632),
  ('5', 'L*+H'): ('L*+H', '0', 0.07482305358948434),
  ('5', 'fH*'): ('fH*', '1', 0.009605662285136504),
  ('5', 'L*+fH'): ('L*+fH', '0', 0.01971688574317492),
  ('5', 'L+fH*'): ('L+fH*', '0', 0.007583417593528817),
  ('5', 'L-'): ('L-', '5', 0.0005055611729019214),
  ('5', 'H-'): ('H-', '5', 0.0010111223458038419),
  ('5', 'L%'): ('L%', '8', 0.0010111223458038419),
  ('5', 'H%'): ('H%', '8', 0.0005055611729019214),
  ('5', 'LH%'): ('LH%', '8', 0.00556117290192113),
  ('5', 'HL%'): ('HL%', '8', 0.0005055611729019214),
  ('5', 'HLH%'): ('HLH%', '8', 0.0020222446916076837),
  ('5', 'M%'): ('M%', '8', 0.0005055611729019214),
  ('0', '*'): ('*', '7', 0.03181818181818181),
  ('0', 'L*'): ('L*', '6', 0.02272727272727273),
  ('0', 'H*'): ('H*', '6', 0.009090909090909087),
  ('0', 'L+H*'): ('L+H*', '6', 0.0045454545454545435),
  ('0', 'L*+H'): ('L*+H', '6', 0.02272727272727273),
  ('0', 'fH*'): ('fH*', '6', 0.0045454545454545435),
  ('0', 'L*+fH'): ('L*+fH', '6', 0.0045454545454545435),
  ('0', 'L+fH*'): ('L+fH*', '6', 0.0045454545454545435),
  ('0', 'La'): ('La', '5', 0.19545454545454544),
  ('0', 'Ha'): ('Ha', '5', 0.018181818181818177),
  ('0', 'fHa'): ('fHa', '5', 0.013636363636363634),
  ('0', 'L-'): ('L-', '5', 0.018181818181818177),
  ('0', 'H-'): ('H-', '5', 0.25),
  ('0', 'L%'): ('L%', '8', 0.15454545454545454),
  ('0', 'H%'): ('H%', '8', 0.009090909090909087),
  ('0', 'LH%'): ('LH%', '8', 0.18181818181818182),
  ('0', 'HL%'): ('HL%', '8', 0.0045454545454545435),
  ('0', 'HLH%'): ('HLH%', '8', 0.04545454545454546),
  ('0', 'M%'): ('M%', '8', 0.0045454545454545435),
  ('1', '*'): ('*', '6', 0.06666666666666667),
  ('1', 'La'): ('La', '5', 0.06666666666666667),
  ('1', 'Ha'): ('Ha', '5', 0.10000000000000002),
  ('1', 'fHa'): ('fHa', '5', 0.4),
  ('1', 'L-'): ('L-', '5', 0.03333333333333333),
  ('1', 'H-'): ('H-', '5', 0.06666666666666667),
  ('1', 'L%'): ('L%', '8', 0.10000000000000002),
  ('1', 'H%'): ('H%', '8', 0.03333333333333333),
  ('1', 'LH%'): ('LH%', '8', 0.03333333333333333),
  ('1', 'HL%'): ('HL%', '8', 0.03333333333333333),
  ('1', 'HLH%'): ('HLH%', '8', 0.03333333333333333),
  ('1', 'M%'): ('M%', '8', 0.03333333333333333),
  ('2', '*'): ('*', '6', 0.03797468354430379),
  ('2', 'La'): ('La', '5', 0.379746835443038),
  ('2', 'fHa'): ('fHa', '5', 0.025316455696202535),
  ('2', 'L-'): ('L-', '5', 0.025316455696202535),
  ('2', 'H-'): ('H-', '5', 0.012658227848101266),
  ('2', 'L%'): ('L%', '8', 0.25316455696202533),
  ('2', 'H%'): ('H%', '8', 0.012658227848101266),
  ('2', 'LH%'): ('LH%', '8', 0.1518987341772152),
  ('2', 'HL%'): ('HL%', '8', 0.025316455696202535),
  ('2', 'HLH%'): ('HLH%', '8', 0.03797468354430379),
  ('2', 'M%'): ('M%', '8', 0.03797468354430379),
  ('3', '*'): ('*', '6', 0.0018105009052504523),
  ('3', 'Ha'): ('Ha', '5', 0.624019312009656),
  ('3', 'fHa'): ('fHa', '5', 0.048883524441762215),
  ('3', 'L-'): ('L-', '5', 0.005431502715751359),
  ('3', 'H-'): ('H-', '5', 0.09233554616777306),
  ('3', 'L%'): ('L%', '8', 0.09776704888352443),
  ('3', 'H%'): ('H%', '8', 0.026554013277006634),
  ('3', 'LH%'): ('LH%', '8', 0.07845503922751962),
  ('3', 'HL%'): ('HL%', '8', 0.006035003017501507),
  ('3', 'HLH%'): ('HLH%', '8', 0.017501508750754378),
  ('3', 'M%'): ('M%', '8', 0.0012070006035003022),
  ('4', '*'): ('*', '4', 0.19444444444444445),
  ('4', 'L*'): ('L*', '6', 0.16666666666666669),
  ('4', 'H*'): ('H*', '6', 0.05555555555555554),
  ('4', 'L+H*'): ('L+H*', '7', 0.02777777777777778),
  ('4', 'L*+H'): ('L*+H', '7', 0.05555555555555554),
  ('4', 'fH*'): ('fH*', '6', 0.02777777777777778),
  ('4', 'L*+fH'): ('L*+fH', '7', 0.02777777777777778),
  ('4', 'L+fH*'): ('L+fH*', '7', 0.02777777777777778),
  ('4', 'L-'): ('L-', '5', 0.02777777777777778),
  ('4', 'H-'): ('H-', '5', 0.02777777777777778),
  ('4', 'L%'): ('L%', '8', 0.11111111111111109),
  ('4', 'H%'): ('H%', '8', 0.02777777777777778),
  ('4', 'LH%'): ('LH%', '8', 0.08333333333333333),
  ('4', 'HL%'): ('HL%', '8', 0.02777777777777778),
  ('4', 'HLH%'): ('HLH%', '8', 0.08333333333333333),
  ('4', 'M%'): ('M%', '8', 0.02777777777777778),
  ('6', '*'): ('*', '6', 0.15151515151515155),
  ('6', 'L-'): ('L-', '5', 0.060606060606060615),
  ('6', 'H-'): ('H-', '5', 0.15151515151515155),
  ('6', 'L%'): ('L%', '8', 0.2121212121212121),
  ('6', 'H%'): ('H%', '8', 0.0909090909090909),
  ('6', 'LH%'): ('LH%', '8', 0.2121212121212121),
  ('6', 'HL%'): ('HL%', '8', 0.060606060606060615),
  ('6', 'HLH%'): ('HLH%', '8', 0.030303030303030304),
  ('6', 'M%'): ('M%', '8', 0.030303030303030304),
  ('7', '*'): ('*', '7', 0.2413793103448276),
  ('7', 'L*'): ('L*', '6', 0.03448275862068965),
  ('7', 'H*'): ('H*', '6', 0.03448275862068965),
  ('7', 'L+H*'): ('L+H*', '6', 0.03448275862068965),
  ('7', 'L*+H'): ('L*+H', '6', 0.03448275862068965),
  ('7', 'fH*'): ('fH*', '6', 0.03448275862068965),
  ('7', 'L*+fH'): ('L*+fH', '6', 0.03448275862068965),
  ('7', 'L+fH*'): ('L+fH*', '6', 0.03448275862068965),
  ('7', 'L-'): ('L-', '5', 0.03448275862068965),
  ('7', 'H-'): ('H-', '5', 0.03448275862068965),
  ('7', 'L%'): ('L%', '8', 0.20689655172413796),
  ('7', 'H%'): ('H%', '8', 0.06896551724137931),
  ('7', 'LH%'): ('LH%', '8', 0.06896551724137931),
  ('7', 'HL%'): ('HL%', '8', 0.03448275862068965),
  ('7', 'HLH%'): ('HLH%', '8', 0.03448275862068965),
  ('7', 'M%'): ('M%', '8', 0.03448275862068965)})

mADS = t2m(tADS)

tIDS = (['5'],
 [('8', 1.0)],
 {('5', '*'): ('*', '4', 0.011547344110854507),
  ('5', 'L*'): ('L*', '3', 0.7419168591224018),
  ('5', 'H*'): ('H*', '2', 0.0594688221709007),
  ('5', 'L+H*'): ('L+H*', '0', 0.0005773672055427252),
  ('5', 'L*+H'): ('L*+H', '0', 0.06870669745958431),
  ('5', 'fH*'): ('fH*', '1', 0.05196304849884526),
  ('5', 'L*+fH'): ('L*+fH', '0', 0.0346420323325635),
  ('5', 'L+fH*'): ('L+fH*', '0', 0.01616628175519631),
  ('5', 'L-'): ('L-', '5', 0.0005773672055427252),
  ('5', 'H-'): ('H-', '5', 0.0005773672055427252),
  ('5', 'L%'): ('L%', '8', 0.0040415704387990765),
  ('5', 'H%'): ('H%', '8', 0.0005773672055427252),
  ('5', 'LH%'): ('LH%', '8', 0.005196304849884525),
  ('5', 'HL%'): ('HL%', '8', 0.0005773672055427252),
  ('5', 'HLH%'): ('HLH%', '8', 0.002309468822170901),
  ('5', 'M%'): ('M%', '8', 0.0011547344110854505),
  ('0', '*'): ('*', '7', 0.026905829596412554),
  ('0', 'L*'): ('L*', '6', 0.05829596412556053),
  ('0', 'H*'): ('H*', '6', 0.004484304932735426),
  ('0', 'L+H*'): ('L+H*', '6', 0.004484304932735426),
  ('0', 'L*+H'): ('L*+H', '6', 0.01345291479820628),
  ('0', 'fH*'): ('fH*', '6', 0.008968609865470852),
  ('0', 'L*+fH'): ('L*+fH', '6', 0.008968609865470852),
  ('0', 'L+fH*'): ('L+fH*', '6', 0.004484304932735426),
  ('0', 'La'): ('La', '5', 0.12107623318385649),
  ('0', 'Ha'): ('Ha', '5', 0.0852017937219731),
  ('0', 'fHa'): ('fHa', '5', 0.022421524663677132),
  ('0', 'L-'): ('L-', '5', 0.03139013452914798),
  ('0', 'H-'): ('H-', '5', 0.06278026905829598),
  ('0', 'L%'): ('L%', '8', 0.242152466367713),
  ('0', 'H%'): ('H%', '8', 0.01345291479820628),
  ('0', 'LH%'): ('LH%', '8', 0.20179372197309417),
  ('0', 'HL%'): ('HL%', '8', 0.03139013452914798),
  ('0', 'HLH%'): ('HLH%', '8', 0.05381165919282511),
  ('0', 'M%'): ('M%', '8', 0.004484304932735426),
  ('1', '*'): ('*', '6', 0.029702970297029705),
  ('1', 'La'): ('La', '5', 0.05940594059405942),
  ('1', 'Ha'): ('Ha', '5', 0.039603960396039604),
  ('1', 'fHa'): ('fHa', '5', 0.2871287128712871),
  ('1', 'L-'): ('L-', '5', 0.0198019801980198),
  ('1', 'H-'): ('H-', '5', 0.029702970297029705),
  ('1', 'L%'): ('L%', '8', 0.4158415841584158),
  ('1', 'H%'): ('H%', '8', 0.0198019801980198),
  ('1', 'LH%'): ('LH%', '8', 0.0495049504950495),
  ('1', 'HL%'): ('HL%', '8', 0.0099009900990099),
  ('1', 'HLH%'): ('HLH%', '8', 0.029702970297029705),
  ('1', 'M%'): ('M%', '8', 0.0099009900990099),
  ('2', '*'): ('*', '6', 0.035398230088495575),
  ('2', 'La'): ('La', '5', 0.25663716814159293),
  ('2', 'fHa'): ('fHa', '5', 0.017699115044247784),
  ('2', 'L-'): ('L-', '5', 0.017699115044247784),
  ('2', 'H-'): ('H-', '5', 0.017699115044247784),
  ('2', 'L%'): ('L%', '8', 0.415929203539823),
  ('2', 'H%'): ('H%', '8', 0.026548672566371685),
  ('2', 'LH%'): ('LH%', '8', 0.1504424778761062),
  ('2', 'HL%'): ('HL%', '8', 0.008849557522123892),
  ('2', 'HLH%'): ('HLH%', '8', 0.026548672566371685),
  ('2', 'M%'): ('M%', '8', 0.026548672566371685),
  ('3', '*'): ('*', '6', 0.01544401544401544),
  ('3', 'Ha'): ('Ha', '5', 0.4563706563706564),
  ('3', 'fHa'): ('fHa', '5', 0.077992277992278),
  ('3', 'L-'): ('L-', '5', 0.004633204633204632),
  ('3', 'H-'): ('H-', '5', 0.07104247104247104),
  ('3', 'L%'): ('L%', '8', 0.07104247104247104),
  ('3', 'H%'): ('H%', '8', 0.08108108108108107),
  ('3', 'LH%'): ('LH%', '8', 0.09729729729729732),
  ('3', 'HL%'): ('HL%', '8', 0.036293436293436294),
  ('3', 'HLH%'): ('HLH%', '8', 0.08803088803088803),
  ('3', 'M%'): ('M%', '8', 0.0007722007722007724),
  ('4', '*'): ('*', '4', 0.22727272727272727),
  ('4', 'L*'): ('L*', '6', 0.13636363636363635),
  ('4', 'H*'): ('H*', '6', 0.02272727272727273),
  ('4', 'L+H*'): ('L+H*', '7', 0.02272727272727273),
  ('4', 'L*+H'): ('L*+H', '7', 0.04545454545454546),
  ('4', 'fH*'): ('fH*', '6', 0.02272727272727273),
  ('4', 'L*+fH'): ('L*+fH', '7', 0.04545454545454546),
  ('4', 'L+fH*'): ('L+fH*', '7', 0.02272727272727273),
  ('4', 'L-'): ('L-', '5', 0.02272727272727273),
  ('4', 'H-'): ('H-', '5', 0.02272727272727273),
  ('4', 'L%'): ('L%', '8', 0.25),
  ('4', 'H%'): ('H%', '8', 0.04545454545454546),
  ('4', 'LH%'): ('LH%', '8', 0.02272727272727273),
  ('4', 'HL%'): ('HL%', '8', 0.02272727272727273),
  ('4', 'HLH%'): ('HLH%', '8', 0.02272727272727273),
  ('4', 'M%'): ('M%', '8', 0.04545454545454546),
  ('6', '*'): ('*', '6', 0.31645569620253167),
  ('6', 'L-'): ('L-', '5', 0.012658227848101266),
  ('6', 'H-'): ('H-', '5', 0.06329113924050633),
  ('6', 'L%'): ('L%', '8', 0.379746835443038),
  ('6', 'H%'): ('H%', '8', 0.0759493670886076),
  ('6', 'LH%'): ('LH%', '8', 0.0759493670886076),
  ('6', 'HL%'): ('HL%', '8', 0.025316455696202535),
  ('6', 'HLH%'): ('HLH%', '8', 0.025316455696202535),
  ('6', 'M%'): ('M%', '8', 0.025316455696202535),
  ('7', '*'): ('*', '7', 0.2903225806451613),
  ('7', 'L*'): ('L*', '6', 0.03225806451612903),
  ('7', 'H*'): ('H*', '6', 0.03225806451612903),
  ('7', 'L+H*'): ('L+H*', '6', 0.03225806451612903),
  ('7', 'L*+H'): ('L*+H', '6', 0.06451612903225806),
  ('7', 'fH*'): ('fH*', '6', 0.03225806451612903),
  ('7', 'L*+fH'): ('L*+fH', '6', 0.03225806451612903),
  ('7', 'L+fH*'): ('L+fH*', '6', 0.03225806451612903),
  ('7', 'L-'): ('L-', '5', 0.03225806451612903),
  ('7', 'H-'): ('H-', '5', 0.03225806451612903),
  ('7', 'L%'): ('L%', '8', 0.16129032258064513),
  ('7', 'H%'): ('H%', '8', 0.03225806451612903),
  ('7', 'LH%'): ('LH%', '8', 0.06451612903225806),
  ('7', 'HL%'): ('HL%', '8', 0.06451612903225806),
  ('7', 'HLH%'): ('HLH%', '8', 0.03225806451612903),
  ('7', 'M%'): ('M%', '8', 0.03225806451612903)})

mIDS = t2m(tIDS)
